<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON and Hash Operations</title>
    <style>
        /* Styling for the page */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        textarea, input {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 10px;
            font-size: 16px;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #f9f9f9;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>JSON and Hash Operations</h1>

    <!-- JSON to Object -->
    <textarea id="jsonInput" placeholder="Enter JSON"></textarea>
    <button onclick="convertJsonToObject()">Convert JSON to Object</button>
    <div id="jsonObjectResult" class="result"></div>

    <!-- JSON to Date -->
    <textarea id="jsonDateInput" placeholder="Enter JSON with date field"></textarea>
    <button onclick="convertJsonToDate()">Convert JSON to Date</button>
    <div id="jsonDateResult" class="result"></div>

    <!-- JSON to CSV and CSV to JSON -->
    <textarea id="jsonCsvInput" placeholder="Enter JSON"></textarea>
    <button onclick="convertJsonToCsv()">Convert JSON to CSV</button>
    <button onclick="convertCsvToJson()">Convert CSV to JSON</button>
    <div id="csvResult" class="result"></div>

    <!-- Create Hash -->
    <input type="text" id="hashInput" placeholder="Enter string to hash">
    <button onclick="createHash()">Create Hash</button>
    <div id="hashResult" class="result"></div>

    <script>
        // JSON to Object
        function convertJsonToObject() {
            try {
                const json = document.getElementById('jsonInput').value;
                const obj = JSON.parse(json);
                document.getElementById('jsonObjectResult').innerText = JSON.stringify(obj, null, 2);
            } catch (e) {
                document.getElementById('jsonObjectResult').innerText = 'Invalid JSON';
            }
        }

        // JSON to Date
        function convertJsonToDate() {
            try {
                const json = document.getElementById('jsonDateInput').value;
                const obj = JSON.parse(json);
                if (obj.date) {
                    const date = new Date(obj.date);
                    document.getElementById('jsonDateResult').innerText = date.toString();
                } else {
                    document.getElementById('jsonDateResult').innerText = 'No date field found';
                }
            } catch (e) {
                document.getElementById('jsonDateResult').innerText = 'Invalid JSON';
            }
        }

        // JSON to CSV
        function convertJsonToCsv() {
            try {
                const json = JSON.parse(document.getElementById('jsonCsvInput').value);
                if (!Array.isArray(json)) throw 'Input JSON must be an array';
                const keys = Object.keys(json[0]);
                const csv = [keys.join(',')].concat(json.map(row => keys.map(k => row[k]).join(','))).join('\n');
                document.getElementById('csvResult').innerText = csv;
            } catch (e) {
                document.getElementById('csvResult').innerText = 'Invalid JSON';
            }
        }

        // CSV to JSON
        function convertCsvToJson() {
            const csv = document.getElementById('csvResult').innerText;
            const [header, ...rows] = csv.split('\n');
            const keys = header.split(',');
            const json = rows.map(row => row.split(',').reduce((acc, value, i) => {
                acc[keys[i]] = value;
                return acc;
            }, {}));
            document.getElementById('csvResult').innerText = JSON.stringify(json, null, 2);
        }

        // Hash a string
        async function createHash() {
            const text = document.getElementById('hashInput').value;
            const encoder = new TextEncoder();
            const data = encoder.encode(text);
            const hash = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hash));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            document.getElementById('hashResult').innerText = hashHex;
        }
    </script>
</body>
</html>
